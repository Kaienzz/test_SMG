# ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚·ã‚¹ãƒ†ãƒ æ›¸

## ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæƒ…å ±
- **ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå**: test_smgï¼ˆSimple Management Gameï¼‰
- **ä½œæˆæ—¥**: 2025å¹´7æœˆ26æ—¥
- **ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: 1.0
- **ä½œæˆè€…**: Claudeï¼ˆAIé–‹ç™ºã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆï¼‰
- **æƒ³å®šé–‹ç™ºæ™‚é–“**: 3æ™‚é–“

## ç›®æ¬¡
1. [ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚·ã‚¹ãƒ†ãƒ æ¦‚è¦](#ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚·ã‚¹ãƒ†ãƒ æ¦‚è¦)
2. [ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³è¨­è¨ˆåŸå‰‡](#ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³è¨­è¨ˆåŸå‰‡)
3. [åŸºæœ¬ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ãƒ©ã‚¤ãƒ–ãƒ©ãƒª](#åŸºæœ¬ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ãƒ©ã‚¤ãƒ–ãƒ©ãƒª)
4. [ã‚²ãƒ¼ãƒ å°‚ç”¨ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³](#ã‚²ãƒ¼ãƒ å°‚ç”¨ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³)
5. [ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–](#ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–)
6. [ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£é…æ…®](#ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£é…æ…®)
7. [çŠ¶æ…‹å¤‰åŒ–ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³](#çŠ¶æ…‹å¤‰åŒ–ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³)
8. [ãƒã‚¤ã‚¯ãƒ­ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³](#ãƒã‚¤ã‚¯ãƒ­ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³)
9. [ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³](#ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³)
10. [å®Ÿè£…ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³](#å®Ÿè£…ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³)

## ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚·ã‚¹ãƒ†ãƒ æ¦‚è¦

### è¨­è¨ˆå“²å­¦
test_smgã®ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚·ã‚¹ãƒ†ãƒ ã¯ã€CGIæ™‚ä»£ã®ç´ æœ´ãªé­…åŠ›ã¨ç¾ä»£çš„ãªãƒ¦ãƒ¼ã‚¶ãƒ“ãƒªãƒ†ã‚£ã‚’èåˆã•ã›ã‚‹ã“ã¨ã‚’ç›®æ¨™ã¨ã—ã¾ã™ã€‚éåº¦ã«æ´¾æ‰‹ãªæ¼”å‡ºã¯é¿ã‘ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ç†è§£ã‚’åŠ©ã‘ã‚‹æ©Ÿèƒ½çš„ãªã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’é‡è¦–ã—ã¾ã™ã€‚

### ã‚·ã‚¹ãƒ†ãƒ æ§‹æˆ
```typescript
interface AnimationSystem {
  core: {
    engine: AnimationEngine;
    scheduler: AnimationScheduler;
    performance: PerformanceMonitor;
  };
  categories: {
    transitions: TransitionAnimations;
    feedback: FeedbackAnimations;
    gameEffects: GameEffectAnimations;
    ui: UIAnimations;
  };
  config: {
    durations: TimingConfig;
    easings: EasingConfig;
    reduced: ReducedMotionConfig;
  };
}
```

### æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯
- **CSS Animations**: åŸºæœ¬çš„ãªãƒˆãƒ©ãƒ³ã‚¸ã‚·ãƒ§ãƒ³ãƒ»ã‚­ãƒ¼ãƒ•ãƒ¬ãƒ¼ãƒ 
- **Web Animations API**: è¤‡é›‘ãªã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³åˆ¶å¾¡
- **CSS Custom Properties**: å‹•çš„ãªå€¤åˆ¶å¾¡
- **Intersection Observer**: ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«é€£å‹•ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
- **RequestAnimationFrame**: é«˜ç²¾åº¦ã‚¿ã‚¤ãƒŸãƒ³ã‚°åˆ¶å¾¡

## ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³è¨­è¨ˆåŸå‰‡

### 1. æ©Ÿèƒ½æ€§é‡è¦–ï¼ˆFunction over Formï¼‰
```css
/* Good: æ©Ÿèƒ½çš„ãªã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ */
.notification-enter {
  animation: slideInFromTop 0.3s ease-out;
  /* ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«æ–°ã—ã„æƒ…å ±ã®å‡ºç¾ã‚’æ˜ç¢ºã«ä¼ãˆã‚‹ */
}

/* Avoid: è£…é£¾çš„ã™ãã‚‹ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ */
.notification-enter-fancy {
  animation: spinFlipBounce 2s ease-in-out;
  /* æ©Ÿèƒ½çš„ä¾¡å€¤ãŒãªã„ */
}
```

### 2. ä¸€è²«æ€§ï¼ˆConsistencyï¼‰
```css
:root {
  /* çµ±ä¸€ã•ã‚ŒãŸã‚¿ã‚¤ãƒŸãƒ³ã‚°å€¤ */
  --duration-instant: 0.1s;
  --duration-fast: 0.2s;
  --duration-normal: 0.3s;
  --duration-slow: 0.5s;
  --duration-deliberate: 0.8s;

  /* çµ±ä¸€ã•ã‚ŒãŸã‚¤ãƒ¼ã‚¸ãƒ³ã‚° */
  --ease-out: cubic-bezier(0.25, 0.46, 0.45, 0.94);
  --ease-in-out: cubic-bezier(0.645, 0.045, 0.355, 1);
  --ease-bounce: cubic-bezier(0.68, -0.55, 0.265, 1.55);
  --ease-spring: cubic-bezier(0.175, 0.885, 0.32, 1.275);
}
```

### 3. äºˆæ¸¬å¯èƒ½æ€§ï¼ˆPredictabilityï¼‰
```javascript
// ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã®äºˆæ¸¬å¯èƒ½ãªãƒ‘ã‚¿ãƒ¼ãƒ³
const AnimationPatterns = {
  // å…¥å ´: ä¸Šã‹ã‚‰ä¸‹ã€å·¦ã‹ã‚‰å³ã€å°ã•ãã‹ã‚‰å¤§ãã
  enter: {
    fromTop: 'translateY(-20px) opacity(0) â†’ translateY(0) opacity(1)',
    fromLeft: 'translateX(-20px) opacity(0) â†’ translateX(0) opacity(1)',
    scale: 'scale(0.9) opacity(0) â†’ scale(1) opacity(1)'
  },
  
  // é€€å ´: é€†æ–¹å‘ã€ãƒ•ã‚§ãƒ¼ãƒ‰ã‚¢ã‚¦ãƒˆ
  exit: {
    toTop: 'translateY(0) opacity(1) â†’ translateY(-20px) opacity(0)',
    toRight: 'translateX(0) opacity(1) â†’ translateX(20px) opacity(0)',
    scale: 'scale(1) opacity(1) â†’ scale(0.9) opacity(0)'
  }
};
```

### 4. ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è€ƒæ…®
```css
/* GPUåŠ é€Ÿå¯èƒ½ãªãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’å„ªå…ˆ */
.optimized-animation {
  /* Good: transform, opacity */
  transform: translateX(0);
  opacity: 1;
  transition: transform 0.3s ease-out, opacity 0.3s ease-out;
  
  /* Avoid: layout-triggering properties */
  /* width, height, margin, padding */
}

/* will-change ã§æœ€é©åŒ–ãƒ’ãƒ³ãƒˆ */
.preparing-animation {
  will-change: transform, opacity;
}

.animation-complete {
  will-change: auto; /* ãƒ¡ãƒ¢ãƒªè§£æ”¾ */
}
```

## åŸºæœ¬ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ãƒ©ã‚¤ãƒ–ãƒ©ãƒª

### 1. Core Animation Engine
```javascript
class GameAnimationEngine {
  constructor() {
    this.activeAnimations = new Map();
    this.performance = new PerformanceMonitor();
    this.reducedMotion = this.checkReducedMotion();
  }

  // åŸºæœ¬ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè¡Œ
  animate(element, keyframes, options = {}) {
    const config = {
      duration: this.reducedMotion ? 0 : (options.duration || 300),
      easing: options.easing || 'ease-out',
      fill: 'forwards',
      ...options
    };

    // Web Animations APIä½¿ç”¨
    const animation = element.animate(keyframes, config);
    
    // ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç›£è¦–
    this.performance.trackAnimation(animation);
    
    // ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ç®¡ç†
    const id = this.generateId();
    this.activeAnimations.set(id, animation);
    
    animation.addEventListener('finish', () => {
      this.activeAnimations.delete(id);
      element.style.willChange = 'auto';
    });

    return animation;
  }

  // CSS ã‚¯ãƒ©ã‚¹ãƒ™ãƒ¼ã‚¹ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
  addClass(element, className, options = {}) {
    return new Promise((resolve) => {
      element.style.willChange = 'transform, opacity';
      element.classList.add(className);
      
      const duration = this.reducedMotion ? 0 : (options.duration || 300);
      
      setTimeout(() => {
        element.style.willChange = 'auto';
        resolve();
      }, duration);
    });
  }

  // ãƒã‚§ãƒ¼ãƒ³å¯èƒ½ãªã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
  chain(animations) {
    return animations.reduce((chain, animation) => {
      return chain.then(() => animation());
    }, Promise.resolve());
  }

  // ä¸¦åˆ—ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
  parallel(animations) {
    return Promise.all(animations.map(animation => animation()));
  }

  // ç¸®å°ãƒ¢ãƒ¼ã‚·ãƒ§ãƒ³è¨­å®šãƒã‚§ãƒƒã‚¯
  checkReducedMotion() {
    return window.matchMedia('(prefers-reduced-motion: reduce)').matches;
  }

  generateId() {
    return `anim_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;
  }
}

// ã‚°ãƒ­ãƒ¼ãƒãƒ«ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹
window.gameAnimations = new GameAnimationEngine();
```

### 2. åŸºæœ¬ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³å®šç¾©
```css
/* ãƒ•ã‚§ãƒ¼ãƒ‰ã‚¤ãƒ³ãƒ»ã‚¢ã‚¦ãƒˆ */
@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

@keyframes fadeOut {
  from { opacity: 1; }
  to { opacity: 0; }
}

/* ã‚¹ãƒ©ã‚¤ãƒ‰ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ */
@keyframes slideInFromTop {
  from {
    transform: translateY(-20px);
    opacity: 0;
  }
  to {
    transform: translateY(0);
    opacity: 1;
  }
}

@keyframes slideInFromLeft {
  from {
    transform: translateX(-20px);
    opacity: 0;
  }
  to {
    transform: translateX(0);
    opacity: 1;
  }
}

@keyframes slideOutToRight {
  from {
    transform: translateX(0);
    opacity: 1;
  }
  to {
    transform: translateX(20px);
    opacity: 0;
  }
}

/* ã‚¹ã‚±ãƒ¼ãƒ«ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ */
@keyframes scaleIn {
  from {
    transform: scale(0.9);
    opacity: 0;
  }
  to {
    transform: scale(1);
    opacity: 1;
  }
}

@keyframes scaleOut {
  from {
    transform: scale(1);
    opacity: 1;
  }
  to {
    transform: scale(0.9);
    opacity: 0;
  }
}

/* ãƒã‚¦ãƒ³ã‚¹ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ */
@keyframes bounceIn {
  0% {
    transform: scale(0.3);
    opacity: 0;
  }
  50% {
    transform: scale(1.05);
    opacity: 0.8;
  }
  70% {
    transform: scale(0.95);
    opacity: 1;
  }
  100% {
    transform: scale(1);
    opacity: 1;
  }
}

/* ã‚·ã‚§ã‚¤ã‚¯ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆã‚¨ãƒ©ãƒ¼ç”¨ï¼‰ */
@keyframes shake {
  0%, 100% { transform: translateX(0); }
  10%, 30%, 50%, 70%, 90% { transform: translateX(-4px); }
  20%, 40%, 60%, 80% { transform: translateX(4px); }
}

/* ãƒ‘ãƒ«ã‚¹ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆæ³¨æ„å–šèµ·ç”¨ï¼‰ */
@keyframes pulse {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.7; }
}

/* ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ã‚¯ãƒ©ã‚¹ */
.anim-fade-in {
  animation: fadeIn var(--duration-normal) var(--ease-out);
}

.anim-slide-in-top {
  animation: slideInFromTop var(--duration-normal) var(--ease-out);
}

.anim-scale-in {
  animation: scaleIn var(--duration-normal) var(--ease-out);
}

.anim-bounce-in {
  animation: bounceIn var(--duration-slow) var(--ease-bounce);
}

.anim-shake {
  animation: shake var(--duration-fast);
}

.anim-pulse {
  animation: pulse var(--duration-deliberate) infinite;
}

/* ç¸®å°ãƒ¢ãƒ¼ã‚·ãƒ§ãƒ³å¯¾å¿œ */
@media (prefers-reduced-motion: reduce) {
  .anim-fade-in,
  .anim-slide-in-top,
  .anim-scale-in,
  .anim-bounce-in {
    animation: fadeIn 0.01s;
  }
  
  .anim-shake,
  .anim-pulse {
    animation: none;
  }
}
```

## ã‚²ãƒ¼ãƒ å°‚ç”¨ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³

### 1. ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹å¤‰åŒ–ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
```javascript
class StatusAnimations {
  // HPå¤‰åŒ–ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
  static animateHPChange(element, oldValue, newValue, maxValue) {
    const isHealing = newValue > oldValue;
    const isDamage = newValue < oldValue;
    const isCritical = newValue <= maxValue * 0.2;
    
    // ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ãƒãƒ¼æ›´æ–°
    const progressBar = element.querySelector('.progress-bar');
    const percentage = (newValue / maxValue) * 100;
    
    // æ•°å€¤ã‚«ã‚¦ãƒ³ãƒˆã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
    this.animateNumber(element.querySelector('.hp-value'), oldValue, newValue, {
      duration: 500,
      formatter: (value) => `${Math.round(value)}/${maxValue}`
    });
    
    // ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ãƒãƒ¼ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
    progressBar.style.transition = 'width 0.5s ease-out';
    progressBar.style.width = `${percentage}%`;
    
    // ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
    if (isHealing) {
      this.showHealingEffect(element);
    } else if (isDamage) {
      this.showDamageEffect(element);
    }
    
    // å±é™ºçŠ¶æ…‹ã®è¡¨ç¤º
    if (isCritical && !element.classList.contains('critical')) {
      element.classList.add('critical');
      progressBar.classList.add('pulse-red');
    } else if (!isCritical && element.classList.contains('critical')) {
      element.classList.remove('critical');
      progressBar.classList.remove('pulse-red');
    }
  }

  // æ•°å€¤ã‚«ã‚¦ãƒ³ãƒˆã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
  static animateNumber(element, from, to, options = {}) {
    const duration = options.duration || 300;
    const formatter = options.formatter || (value => Math.round(value));
    const startTime = performance.now();
    
    const animate = (currentTime) => {
      const elapsed = currentTime - startTime;
      const progress = Math.min(elapsed / duration, 1);
      
      // ã‚¤ãƒ¼ã‚¸ãƒ³ã‚°é©ç”¨
      const easedProgress = this.easeOutCubic(progress);
      const currentValue = from + (to - from) * easedProgress;
      
      element.textContent = formatter(currentValue);
      
      if (progress < 1) {
        requestAnimationFrame(animate);
      }
    };
    
    requestAnimationFrame(animate);
  }

  // å›å¾©ã‚¨ãƒ•ã‚§ã‚¯ãƒˆ
  static showHealingEffect(element) {
    const effect = document.createElement('div');
    effect.className = 'healing-effect';
    effect.textContent = '+';
    
    element.style.position = 'relative';
    element.appendChild(effect);
    
    // CSS for healing effect
    effect.style.cssText = `
      position: absolute;
      top: -10px;
      right: 10px;
      color: var(--color-success-600);
      font-weight: bold;
      pointer-events: none;
      animation: healingFloat 1s ease-out forwards;
    `;
    
    setTimeout(() => effect.remove(), 1000);
  }

  // ãƒ€ãƒ¡ãƒ¼ã‚¸ã‚¨ãƒ•ã‚§ã‚¯ãƒˆ
  static showDamageEffect(element) {
    element.classList.add('damage-flash');
    setTimeout(() => element.classList.remove('damage-flash'), 200);
  }

  // ã‚¤ãƒ¼ã‚¸ãƒ³ã‚°é–¢æ•°
  static easeOutCubic(t) {
    return 1 - Math.pow(1 - t, 3);
  }
}

// CSS for status animations
const statusAnimationCSS = `
@keyframes healingFloat {
  0% {
    transform: translateY(0) scale(1);
    opacity: 1;
  }
  100% {
    transform: translateY(-20px) scale(1.2);
    opacity: 0;
  }
}

.damage-flash {
  animation: damageFlash 0.2s ease-out;
}

@keyframes damageFlash {
  0%, 100% { background-color: transparent; }
  50% { background-color: rgba(239, 68, 68, 0.2); }
}

.pulse-red {
  animation: pulseRed 1s infinite;
}

@keyframes pulseRed {
  0%, 100% { background-color: var(--color-danger-600); }
  50% { background-color: var(--color-danger-400); }
}
`;
```

### 2. ãƒãƒˆãƒ«ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
```javascript
class BattleAnimations {
  // æ”»æ’ƒã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
  static async attack(attackerElement, targetElement) {
    // æ”»æ’ƒè€…ã®å‰é€²ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
    await window.gameAnimations.animate(attackerElement, [
      { transform: 'translateX(0) scale(1)' },
      { transform: 'translateX(20px) scale(1.1)', offset: 0.5 },
      { transform: 'translateX(0) scale(1)' }
    ], { duration: 600 });
    
    // ã‚¿ãƒ¼ã‚²ãƒƒãƒˆã®è¢«ãƒ€ãƒ¡ãƒ¼ã‚¸ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
    await this.takeDamage(targetElement);
  }

  // è¢«ãƒ€ãƒ¡ãƒ¼ã‚¸ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
  static async takeDamage(element) {
    return window.gameAnimations.animate(element, [
      { transform: 'translateX(0)', filter: 'brightness(1)' },
      { transform: 'translateX(-5px)', filter: 'brightness(1.5)', offset: 0.2 },
      { transform: 'translateX(5px)', filter: 'brightness(1.5)', offset: 0.4 },
      { transform: 'translateX(-3px)', filter: 'brightness(1.2)', offset: 0.6 },
      { transform: 'translateX(3px)', filter: 'brightness(1.2)', offset: 0.8 },
      { transform: 'translateX(0)', filter: 'brightness(1)' }
    ], { duration: 500 });
  }

  // é˜²å¾¡ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
  static async defend(element) {
    return window.gameAnimations.animate(element, [
      { transform: 'scale(1)', filter: 'brightness(1)' },
      { transform: 'scale(0.95)', filter: 'brightness(1.2)' },
      { transform: 'scale(1)', filter: 'brightness(1)' }
    ], { duration: 300 });
  }

  // ã‚¹ã‚­ãƒ«ä½¿ç”¨ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
  static async useSkill(element, skillType) {
    const animations = {
      magic: [
        { transform: 'scale(1) rotate(0deg)', filter: 'hue-rotate(0deg)' },
        { transform: 'scale(1.1) rotate(5deg)', filter: 'hue-rotate(90deg)', offset: 0.5 },
        { transform: 'scale(1) rotate(0deg)', filter: 'hue-rotate(0deg)' }
      ],
      heal: [
        { transform: 'scale(1)', filter: 'brightness(1) saturate(1)' },
        { transform: 'scale(1.05)', filter: 'brightness(1.3) saturate(1.5)', offset: 0.5 },
        { transform: 'scale(1)', filter: 'brightness(1) saturate(1)' }
      ],
      special: [
        { transform: 'scale(1) rotateY(0deg)' },
        { transform: 'scale(1.2) rotateY(180deg)', offset: 0.5 },
        { transform: 'scale(1) rotateY(360deg)' }
      ]
    };

    return window.gameAnimations.animate(
      element, 
      animations[skillType] || animations.magic, 
      { duration: 800 }
    );
  }

  // æˆ¦é—˜ä¸èƒ½ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
  static async defeated(element) {
    await window.gameAnimations.animate(element, [
      { transform: 'scale(1) rotate(0deg)', opacity: 1 },
      { transform: 'scale(0.8) rotate(-5deg)', opacity: 0.7, offset: 0.7 },
      { transform: 'scale(0.6) rotate(-10deg)', opacity: 0.3 }
    ], { duration: 1000, fill: 'forwards' });
    
    element.classList.add('defeated');
  }

  // å‹åˆ©ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
  static async victory(element) {
    return window.gameAnimations.animate(element, [
      { transform: 'scale(1) translateY(0)', filter: 'brightness(1)' },
      { transform: 'scale(1.1) translateY(-10px)', filter: 'brightness(1.3)', offset: 0.3 },
      { transform: 'scale(1.05) translateY(-5px)', filter: 'brightness(1.2)', offset: 0.6 },
      { transform: 'scale(1) translateY(0)', filter: 'brightness(1)' }
    ], { duration: 1200 });
  }
}
```

### 3. ã‚¢ã‚¤ãƒ†ãƒ ãƒ»ã‚¤ãƒ³ãƒ™ãƒ³ãƒˆãƒªã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
```javascript
class InventoryAnimations {
  // ã‚¢ã‚¤ãƒ†ãƒ å–å¾—ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
  static async itemObtained(itemElement, inventorySlot) {
    // ã‚¢ã‚¤ãƒ†ãƒ ã®å‡ºç¾
    await window.gameAnimations.animate(itemElement, [
      { transform: 'scale(0) rotate(0deg)', opacity: 0 },
      { transform: 'scale(1.2) rotate(180deg)', opacity: 1, offset: 0.6 },
      { transform: 'scale(1) rotate(360deg)', opacity: 1 }
    ], { duration: 600 });

    // ã‚¤ãƒ³ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒ­ãƒƒãƒˆã¸ã®ç§»å‹•ï¼ˆå¿…è¦ã«å¿œã˜ã¦ï¼‰
    if (inventorySlot) {
      const itemRect = itemElement.getBoundingClientRect();
      const slotRect = inventorySlot.getBoundingClientRect();
      
      const deltaX = slotRect.left - itemRect.left;
      const deltaY = slotRect.top - itemRect.top;
      
      await window.gameAnimations.animate(itemElement, [
        { transform: 'translate(0, 0) scale(1)' },
        { transform: `translate(${deltaX}px, ${deltaY}px) scale(0.8)` }
      ], { duration: 400 });
    }
  }

  // ã‚¢ã‚¤ãƒ†ãƒ ä½¿ç”¨ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
  static async itemUsed(itemElement) {
    await window.gameAnimations.animate(itemElement, [
      { transform: 'scale(1) rotate(0deg)', opacity: 1 },
      { transform: 'scale(1.3) rotate(20deg)', opacity: 0.8, offset: 0.3 },
      { transform: 'scale(0) rotate(40deg)', opacity: 0 }
    ], { duration: 500 });
  }

  // ãƒ‰ãƒ©ãƒƒã‚°ï¼†ãƒ‰ãƒ­ãƒƒãƒ—ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
  static startDrag(element) {
    element.style.transform = 'scale(1.1) rotate(5deg)';
    element.style.zIndex = '1000';
    element.style.transition = 'transform 0.2s ease-out';
  }

  static endDrag(element, success) {
    if (success) {
      // æˆåŠŸæ™‚ã®ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
      window.gameAnimations.animate(element, [
        { transform: 'scale(1.1) rotate(5deg)' },
        { transform: 'scale(1) rotate(0deg)' }
      ], { duration: 200 });
    } else {
      // å¤±æ•—æ™‚ã®ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆå…ƒã®ä½ç½®ã«æˆ»ã‚‹ï¼‰
      window.gameAnimations.animate(element, [
        { transform: 'scale(1.1) rotate(5deg)' },
        { transform: 'scale(1.2) rotate(-5deg)', offset: 0.5 },
        { transform: 'scale(1) rotate(0deg)' }
      ], { duration: 300 });
    }
    
    element.style.zIndex = '';
  }

  // ã‚¹ãƒ­ãƒƒãƒˆå¼·èª¿ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
  static highlightSlot(slotElement, highlight = true) {
    if (highlight) {
      slotElement.classList.add('slot-highlight');
    } else {
      slotElement.classList.remove('slot-highlight');
    }
  }
}

// CSS for inventory animations
const inventoryAnimationCSS = `
.slot-highlight {
  animation: slotPulse 1s infinite;
  border-color: var(--color-primary-400) !important;
}

@keyframes slotPulse {
  0%, 100% {
    background-color: var(--color-primary-50);
    transform: scale(1);
  }
  50% {
    background-color: var(--color-primary-100);
    transform: scale(1.05);
  }
}

.item-dragging {
  transform: scale(1.1) rotate(5deg);
  z-index: 1000;
  box-shadow: var(--shadow-lg);
}
`;
```

## ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–

### 1. Animation Performance Monitor
```javascript
class AnimationPerformanceMonitor {
  constructor() {
    this.metrics = {
      totalAnimations: 0,
      activeAnimations: 0,
      droppedFrames: 0,
      averageFPS: 60
    };
    this.frameTimeHistory = [];
    this.lastFrameTime = performance.now();
  }

  trackAnimation(animation) {
    this.metrics.totalAnimations++;
    this.metrics.activeAnimations++;
    
    animation.addEventListener('finish', () => {
      this.metrics.activeAnimations--;
    });

    animation.addEventListener('cancel', () => {
      this.metrics.activeAnimations--;
    });
  }

  startFrameMonitoring() {
    const monitorFrame = (timestamp) => {
      const frameTime = timestamp - this.lastFrameTime;
      this.frameTimeHistory.push(frameTime);
      
      // éå»60ãƒ•ãƒ¬ãƒ¼ãƒ ã®å¹³å‡ã‚’ä¿æŒ
      if (this.frameTimeHistory.length > 60) {
        this.frameTimeHistory.shift();
      }
      
      // FPSè¨ˆç®—
      this.metrics.averageFPS = 1000 / (
        this.frameTimeHistory.reduce((sum, time) => sum + time, 0) / 
        this.frameTimeHistory.length
      );
      
      // ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ‰ãƒ­ãƒƒãƒ—æ¤œå‡º
      if (frameTime > 20) { // 50fpsä»¥ä¸‹
        this.metrics.droppedFrames++;
      }
      
      this.lastFrameTime = timestamp;
      requestAnimationFrame(monitorFrame);
    };
    
    requestAnimationFrame(monitorFrame);
  }

  getPerformanceReport() {
    return {
      ...this.metrics,
      recommendation: this.generateRecommendation()
    };
  }

  generateRecommendation() {
    if (this.metrics.averageFPS < 30) {
      return 'critical: ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å‰Šæ¸›ã—ã¦ãã ã•ã„';
    } else if (this.metrics.averageFPS < 45) {
      return 'warning: ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãŒä½ä¸‹ã—ã¦ã„ã¾ã™';
    } else if (this.metrics.activeAnimations > 10) {
      return 'info: åŒæ™‚å®Ÿè¡Œã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³æ•°ãŒå¤šã‚ã§ã™';
    }
    return 'good: ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã¯è‰¯å¥½ã§ã™';
  }
}
```

### 2. æœ€é©åŒ–æˆ¦ç•¥
```javascript
class AnimationOptimizer {
  static optimizeForDevice() {
    const isLowEndDevice = this.detectLowEndDevice();
    const hasReducedMotion = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
    
    if (isLowEndDevice || hasReducedMotion) {
      // è»½é‡ãƒ¢ãƒ¼ãƒ‰è¨­å®š
      document.documentElement.classList.add('reduced-animations');
      this.disableExpensiveAnimations();
    }
  }

  static detectLowEndDevice() {
    // CPU ã‚³ã‚¢æ•°ãƒã‚§ãƒƒã‚¯
    const cores = navigator.hardwareConcurrency || 2;
    
    // ãƒ¡ãƒ¢ãƒªãƒã‚§ãƒƒã‚¯ï¼ˆåˆ©ç”¨å¯èƒ½ãªå ´åˆï¼‰
    const memory = navigator.deviceMemory || 2;
    
    // User Agentãƒ™ãƒ¼ã‚¹ã®ç°¡æ˜“åˆ¤å®š
    const isMobile = /Android|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
    
    return cores <= 2 || memory <= 2 || isMobile;
  }

  static disableExpensiveAnimations() {
    const style = document.createElement('style');
    style.textContent = `
      .reduced-animations * {
        animation-duration: 0.01s !important;
        animation-delay: 0s !important;
        transition-duration: 0.01s !important;
        transition-delay: 0s !important;
      }
      
      .reduced-animations .complex-animation {
        display: none !important;
      }
    `;
    document.head.appendChild(style);
  }

  // ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã®é–“å¼•ã
  static throttleAnimations(animations, maxConcurrent = 3) {
    const queue = [...animations];
    const active = [];
    
    const processNext = () => {
      if (queue.length > 0 && active.length < maxConcurrent) {
        const next = queue.shift();
        active.push(next);
        
        next().finally(() => {
          const index = active.indexOf(next);
          active.splice(index, 1);
          processNext();
        });
      }
    };
    
    // åˆæœŸå®Ÿè¡Œ
    for (let i = 0; i < maxConcurrent && queue.length > 0; i++) {
      processNext();
    }
  }
}
```

## ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£é…æ…®

### 1. ç¸®å°ãƒ¢ãƒ¼ã‚·ãƒ§ãƒ³å¯¾å¿œ
```css
/* åŸºæœ¬çš„ãªç¸®å°ãƒ¢ãƒ¼ã‚·ãƒ§ãƒ³å¯¾å¿œ */
@media (prefers-reduced-motion: reduce) {
  /* ã™ã¹ã¦ã®ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ç„¡åŠ¹åŒ– */
  *, *::before, *::after {
    animation-duration: 0.01s !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01s !important;
    scroll-behavior: auto !important;
  }
  
  /* é‡è¦ãªçŠ¶æ…‹å¤‰åŒ–ã¯æ®‹ã™ */
  .critical-feedback {
    animation: none !important;
    transition: background-color 0.01s !important;
  }
  
  /* ãƒ•ã‚©ãƒ¼ã‚«ã‚¹è¡¨ç¤ºã¯ç¶­æŒ */
  :focus {
    transition: outline 0.01s !important;
  }
}

/* ã‚ˆã‚Šç´°ã‹ã„åˆ¶å¾¡ */
@media (prefers-reduced-motion: reduce) {
  .decorative-animation {
    animation: none !important;
  }
  
  .functional-animation {
    animation-duration: 0.2s !important;
  }
}
```

### 2. ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³åˆ¶å¾¡API
```javascript
class AccessibleAnimationController {
  constructor() {
    this.prefersReducedMotion = this.checkReducedMotion();
    this.userOverride = null; // ãƒ¦ãƒ¼ã‚¶ãƒ¼è¨­å®šã«ã‚ˆã‚‹ä¸Šæ›¸ã
    
    // è¨­å®šå¤‰æ›´ã®ç›£è¦–
    this.mediaQuery = window.matchMedia('(prefers-reduced-motion: reduce)');
    this.mediaQuery.addListener(this.handleMotionPreferenceChange.bind(this));
  }

  checkReducedMotion() {
    return window.matchMedia('(prefers-reduced-motion: reduce)').matches;
  }

  handleMotionPreferenceChange(e) {
    this.prefersReducedMotion = e.matches;
    this.updateAnimationSettings();
  }

  // ãƒ¦ãƒ¼ã‚¶ãƒ¼è¨­å®šã®ä¿å­˜
  setUserPreference(preference) {
    this.userOverride = preference;
    localStorage.setItem('animation-preference', preference);
    this.updateAnimationSettings();
  }

  getUserPreference() {
    if (this.userOverride !== null) return this.userOverride;
    
    const stored = localStorage.getItem('animation-preference');
    if (stored) return stored === 'true';
    
    return !this.prefersReducedMotion; // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ
  }

  updateAnimationSettings() {
    const enableAnimations = this.getUserPreference();
    
    document.documentElement.classList.toggle('animations-disabled', !enableAnimations);
    
    // ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚¨ãƒ³ã‚¸ãƒ³ã«é€šçŸ¥
    if (window.gameAnimations) {
      window.gameAnimations.reducedMotion = !enableAnimations;
    }
  }

  // æ®µéšçš„ãªã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³åˆ¶å¾¡
  getAnimationLevel() {
    if (!this.getUserPreference()) return 'none';
    if (this.prefersReducedMotion) return 'essential';
    return 'full';
  }

  shouldPlayAnimation(animationType) {
    const level = this.getAnimationLevel();
    
    switch (level) {
      case 'none':
        return false;
      case 'essential':
        return ['feedback', 'status-change', 'error'].includes(animationType);
      case 'full':
        return true;
      default:
        return true;
    }
  }
}

// ã‚°ãƒ­ãƒ¼ãƒãƒ«ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼
window.animationController = new AccessibleAnimationController();
```

### 3. ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ãƒªãƒ¼ãƒ€ãƒ¼å¯¾å¿œ
```javascript
class AnimationAccessibility {
  // ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³é–‹å§‹æ™‚ã®éŸ³å£°èª¬æ˜
  static announceAnimation(description, type = 'polite') {
    if (window.a11y) {
      window.a11y.announce(description, type);
    }
  }

  // ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ä¸­ã®è¦ç´ ã«ariaå±æ€§è¿½åŠ 
  static makeAnimationAccessible(element, description) {
    element.setAttribute('aria-live', 'polite');
    element.setAttribute('aria-description', description);
    
    // ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³å®Œäº†å¾Œã«ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—
    element.addEventListener('animationend', () => {
      element.removeAttribute('aria-live');
      element.removeAttribute('aria-description');
    }, { once: true });
  }

  // é‡è¦ãªçŠ¶æ…‹å¤‰åŒ–ã®ä»£æ›¿è¡¨ç¾
  static provideAlternativeFeedback(element, change) {
    // è¦–è¦šçš„ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ãŒç„¡åŠ¹ã§ã‚‚çŠ¶æ…‹ã¯ä¼ãˆã‚‹
    const announcement = this.createStatusAnnouncement(change);
    this.announceAnimation(announcement);
    
    // è¦–è¦šçš„ãªä»£æ›¿è¡¨ç¾ï¼ˆè‰²ã‚„å½¢ã®å¤‰åŒ–ï¼‰
    element.classList.add(`status-${change.type}`);
    setTimeout(() => {
      element.classList.remove(`status-${change.type}`);
    }, 1000);
  }

  static createStatusAnnouncement(change) {
    switch (change.type) {
      case 'hp-decrease':
        return `HPãŒ${change.amount}æ¸›å°‘ã—ã¦${change.newValue}ã«ãªã‚Šã¾ã—ãŸ`;
      case 'hp-increase':
        return `HPãŒ${change.amount}å›å¾©ã—ã¦${change.newValue}ã«ãªã‚Šã¾ã—ãŸ`;
      case 'level-up':
        return `ãƒ¬ãƒ™ãƒ«ãŒ${change.newLevel}ã«ä¸ŠãŒã‚Šã¾ã—ãŸï¼`;
      case 'item-obtained':
        return `${change.itemName}ã‚’æ‰‹ã«å…¥ã‚Œã¾ã—ãŸ`;
      default:
        return change.description || 'çŠ¶æ…‹ãŒå¤‰åŒ–ã—ã¾ã—ãŸ';
    }
  }
}
```

## çŠ¶æ…‹å¤‰åŒ–ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³

### 1. Page Transitions
```javascript
class PageTransitionManager {
  constructor() {
    this.currentPage = null;
    this.transitionDuration = 300;
  }

  async transitionTo(newPageElement, transitionType = 'slide') {
    const oldPage = this.currentPage;
    
    if (oldPage) {
      await this.exitAnimation(oldPage, transitionType);
    }
    
    await this.enterAnimation(newPageElement, transitionType);
    this.currentPage = newPageElement;
  }

  async exitAnimation(element, type) {
    const animations = {
      slide: [
        { transform: 'translateX(0)', opacity: 1 },
        { transform: 'translateX(-100%)', opacity: 0 }
      ],
      fade: [
        { opacity: 1 },
        { opacity: 0 }
      ],
      scale: [
        { transform: 'scale(1)', opacity: 1 },
        { transform: 'scale(0.9)', opacity: 0 }
      ]
    };

    return window.gameAnimations.animate(
      element, 
      animations[type] || animations.fade, 
      { duration: this.transitionDuration }
    );
  }

  async enterAnimation(element, type) {
    const animations = {
      slide: [
        { transform: 'translateX(100%)', opacity: 0 },
        { transform: 'translateX(0)', opacity: 1 }
      ],
      fade: [
        { opacity: 0 },
        { opacity: 1 }
      ],
      scale: [
        { transform: 'scale(1.1)', opacity: 0 },
        { transform: 'scale(1)', opacity: 1 }
      ]
    };

    return window.gameAnimations.animate(
      element, 
      animations[type] || animations.fade, 
      { duration: this.transitionDuration }
    );
  }
}
```

### 2. Modal Animations
```css
/* ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ */
.modal-overlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.5);
  display: flex;
  align-items: center;
  justify-content: center;
  opacity: 0;
  animation: modalOverlayIn var(--duration-normal) ease-out forwards;
}

.modal-overlay.closing {
  animation: modalOverlayOut var(--duration-normal) ease-in forwards;
}

.modal-content {
  background: var(--color-surface);
  border-radius: var(--border-radius-lg);
  padding: var(--spacing-6);
  max-width: 90vw;
  max-height: 90vh;
  overflow: auto;
  transform: scale(0.9) translateY(20px);
  animation: modalContentIn var(--duration-normal) ease-out forwards;
}

.modal-overlay.closing .modal-content {
  animation: modalContentOut var(--duration-normal) ease-in forwards;
}

@keyframes modalOverlayIn {
  to { opacity: 1; }
}

@keyframes modalOverlayOut {
  to { opacity: 0; }
}

@keyframes modalContentIn {
  to {
    transform: scale(1) translateY(0);
  }
}

@keyframes modalContentOut {
  to {
    transform: scale(0.9) translateY(20px);
  }
}
```

## ãƒã‚¤ã‚¯ãƒ­ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³

### 1. Button Interactions
```css
/* ãƒœã‚¿ãƒ³ã®ãƒã‚¤ã‚¯ãƒ­ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³ */
.interactive-button {
  position: relative;
  overflow: hidden;
  transition: all var(--duration-fast) ease-out;
}

.interactive-button:hover {
  transform: translateY(-1px);
  box-shadow: var(--shadow-md);
}

.interactive-button:active {
  transform: translateY(0);
  transition-duration: var(--duration-instant);
}

/* ãƒªãƒƒãƒ—ãƒ«ã‚¨ãƒ•ã‚§ã‚¯ãƒˆ */
.interactive-button::after {
  content: '';
  position: absolute;
  top: 50%;
  left: 50%;
  width: 0;
  height: 0;
  border-radius: 50%;
  background: rgba(255, 255, 255, 0.3);
  transform: translate(-50%, -50%);
  transition: width var(--duration-normal), height var(--duration-normal);
}

.interactive-button:active::after {
  width: 300px;
  height: 300px;
}

/* èª­ã¿è¾¼ã¿çŠ¶æ…‹ */
.interactive-button.loading {
  pointer-events: none;
  opacity: 0.7;
}

.interactive-button.loading::before {
  content: '';
  position: absolute;
  top: 50%;
  left: 50%;
  width: 16px;
  height: 16px;
  margin: -8px 0 0 -8px;
  border: 2px solid transparent;
  border-top: 2px solid currentColor;
  border-radius: 50%;
  animation: spin var(--duration-deliberate) linear infinite;
}

@keyframes spin {
  to { transform: rotate(360deg); }
}
```

### 2. Form Interactions
```css
/* ãƒ•ã‚©ãƒ¼ãƒ ã®ãƒã‚¤ã‚¯ãƒ­ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³ */
.form-field {
  position: relative;
}

.form-input {
  padding: var(--spacing-3);
  border: 2px solid var(--color-border);
  border-radius: var(--border-radius-md);
  transition: all var(--duration-fast) ease-out;
  background: var(--color-surface);
}

.form-input:focus {
  border-color: var(--color-primary-500);
  box-shadow: 0 0 0 3px var(--color-primary-100);
  outline: none;
}

.form-input:invalid:not(:focus) {
  border-color: var(--color-danger-500);
  animation: inputError var(--duration-fast) ease-out;
}

@keyframes inputError {
  0%, 100% { transform: translateX(0); }
  25% { transform: translateX(-2px); }
  75% { transform: translateX(2px); }
}

/* ãƒ•ãƒ­ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ãƒ©ãƒ™ãƒ« */
.floating-label {
  position: absolute;
  top: var(--spacing-3);
  left: var(--spacing-3);
  pointer-events: none;
  transition: all var(--duration-fast) ease-out;
  color: var(--color-text-secondary);
}

.form-input:focus + .floating-label,
.form-input:not(:placeholder-shown) + .floating-label {
  top: -8px;
  left: var(--spacing-2);
  font-size: var(--font-size-xs);
  color: var(--color-primary-600);
  background: var(--color-surface);
  padding: 0 var(--spacing-1);
}
```

## ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³

### 1. Device-Specific Optimizations
```css
/* ãƒ¢ãƒã‚¤ãƒ«æœ€é©åŒ– */
@media (max-width: 768px) {
  /* ã‚ˆã‚ŠçŸ­ã„ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ */
  :root {
    --duration-fast: 0.15s;
    --duration-normal: 0.2s;
    --duration-slow: 0.3s;
  }
  
  /* ã‚¿ãƒƒãƒãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯å¼·åŒ– */
  .touch-feedback:active {
    transform: scale(0.95);
    transition-duration: var(--duration-instant);
  }
}

/* é«˜è§£åƒåº¦ãƒ‡ã‚£ã‚¹ãƒ—ãƒ¬ã‚¤ */
@media (-webkit-min-device-pixel-ratio: 2) {
  /* ã‚ˆã‚Šç²¾ç´°ãªã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ */
  .high-res-animation {
    animation-timing-function: cubic-bezier(0.25, 0.46, 0.45, 0.94);
  }
}

/* ä½ã‚¹ãƒšãƒƒã‚¯ãƒ‡ãƒã‚¤ã‚¹å¯¾å¿œ */
@media (max-width: 768px) and (max-height: 1024px) {
  .complex-animation {
    animation: none !important;
  }
  
  .essential-animation {
    animation-duration: 0.2s !important;
  }
}
```

### 2. Performance-Based Scaling
```javascript
class ResponsiveAnimationManager {
  constructor() {
    this.performanceLevel = this.detectPerformanceLevel();
    this.applyPerformanceOptimizations();
  }

  detectPerformanceLevel() {
    const cores = navigator.hardwareConcurrency || 2;
    const memory = navigator.deviceMemory || 2;
    const connection = navigator.connection?.effectiveType || '4g';
    
    if (cores >= 8 && memory >= 8 && connection === '4g') {
      return 'high';
    } else if (cores >= 4 && memory >= 4) {
      return 'medium';
    } else {
      return 'low';
    }
  }

  applyPerformanceOptimizations() {
    const level = this.performanceLevel;
    
    const styles = {
      high: {
        '--animation-quality': '1',
        '--max-concurrent-animations': '10',
        '--enable-complex-animations': '1'
      },
      medium: {
        '--animation-quality': '0.8',
        '--max-concurrent-animations': '5',
        '--enable-complex-animations': '0'
      },
      low: {
        '--animation-quality': '0.5',
        '--max-concurrent-animations': '3',
        '--enable-complex-animations': '0'
      }
    };

    Object.entries(styles[level]).forEach(([property, value]) => {
      document.documentElement.style.setProperty(property, value);
    });
  }
}
```

## å®Ÿè£…ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³

### 1. é–‹ç™ºãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼
```javascript
// ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè£…ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ
const AnimationChecklist = {
  design: [
    'ç›®çš„ãŒæ˜ç¢ºã‹ï¼ˆè£…é£¾ vs æ©Ÿèƒ½ï¼‰',
    'ã‚¿ã‚¤ãƒŸãƒ³ã‚°ãŒé©åˆ‡ã‹',
    'ãƒ–ãƒ©ãƒ³ãƒ‰ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³ã«æº–æ‹ ã—ã¦ã„ã‚‹ã‹'
  ],
  implementation: [
    'GPUåŠ é€Ÿãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹ã‹',
    'will-changeã‚’é©åˆ‡ã«ä½¿ç”¨ãƒ»è§£é™¤ã—ã¦ã„ã‚‹ã‹',
    'ãƒ¡ãƒ¢ãƒªãƒªãƒ¼ã‚¯ã®å¯èƒ½æ€§ã¯ãªã„ã‹'
  ],
  accessibility: [
    'prefers-reduced-motionã«å¯¾å¿œã—ã¦ã„ã‚‹ã‹',
    'ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ã¯é˜»å®³ã•ã‚Œãªã„ã‹',
    'ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ãƒªãƒ¼ãƒ€ãƒ¼ã¸ã®é…æ…®ã¯ã‚ã‚‹ã‹'
  ],
  performance: [
    '60fpsã‚’ç¶­æŒã§ãã‚‹ã‹',
    'åŒæ™‚å®Ÿè¡Œã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³æ•°ã¯é©åˆ‡ã‹',
    'ãƒ¢ãƒã‚¤ãƒ«ãƒ‡ãƒã‚¤ã‚¹ã§ã‚‚æ»‘ã‚‰ã‹ã‹'
  ]
};

// ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³å“è³ªãƒ†ã‚¹ãƒˆ
class AnimationQualityTester {
  static async testAnimation(element, animation) {
    const results = {
      performance: await this.testPerformance(element, animation),
      accessibility: this.testAccessibility(element),
      usability: this.testUsability(animation)
    };
    
    return results;
  }

  static async testPerformance(element, animation) {
    const startTime = performance.now();
    let frameCount = 0;
    let droppedFrames = 0;
    
    const countFrames = () => {
      frameCount++;
      const now = performance.now();
      if (now - startTime < animation.duration) {
        requestAnimationFrame(countFrames);
      }
    };
    
    requestAnimationFrame(countFrames);
    await animation;
    
    const actualFrameRate = frameCount / (animation.duration / 1000);
    const expectedFrameRate = 60;
    
    return {
      actualFrameRate,
      droppedFrames: Math.max(0, expectedFrameRate - actualFrameRate),
      isSmooth: actualFrameRate >= 55
    };
  }

  static testAccessibility(element) {
    return {
      hasReducedMotionFallback: this.hasReducedMotionCSS(element),
      hasAriaLabels: element.hasAttribute('aria-label') || element.hasAttribute('aria-describedby'),
      focusNotBlocked: this.canReceiveFocus(element)
    };
  }

  static testUsability(animation) {
    return {
      durationAppropriate: animation.duration >= 200 && animation.duration <= 500,
      easingNatural: animation.easing !== 'linear',
      purposeClear: animation.purpose !== 'decoration'
    };
  }
}
```

### 2. ãƒ‡ãƒãƒƒã‚°ãƒ„ãƒ¼ãƒ«
```javascript
// ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ãƒ‡ãƒãƒƒã‚¬ãƒ¼
class AnimationDebugger {
  constructor() {
    this.isEnabled = localStorage.getItem('debug-animations') === 'true';
    this.overlay = null;
    
    if (this.isEnabled) {
      this.createDebugOverlay();
    }
  }

  createDebugOverlay() {
    this.overlay = document.createElement('div');
    this.overlay.id = 'animation-debug-overlay';
    this.overlay.style.cssText = `
      position: fixed;
      top: 10px;
      right: 10px;
      background: rgba(0, 0, 0, 0.8);
      color: white;
      padding: 10px;
      border-radius: 5px;
      font-family: monospace;
      font-size: 12px;
      z-index: 10000;
      pointer-events: none;
    `;
    document.body.appendChild(this.overlay);
    
    this.updateOverlay();
    setInterval(() => this.updateOverlay(), 100);
  }

  updateOverlay() {
    if (!this.overlay) return;
    
    const activeAnimations = document.getAnimations().length;
    const fps = window.gameAnimations?.performance?.metrics?.averageFPS || 'N/A';
    
    this.overlay.innerHTML = `
      Active Animations: ${activeAnimations}<br>
      Current FPS: ${Math.round(fps)}<br>
      Reduced Motion: ${window.animationController?.prefersReducedMotion ? 'ON' : 'OFF'}
    `;
  }

  logAnimation(name, element, details) {
    if (!this.isEnabled) return;
    
    console.group(`ğŸ¬ Animation: ${name}`);
    console.log('Element:', element);
    console.log('Details:', details);
    console.log('Performance Impact:', this.calculateImpact(details));
    console.groupEnd();
  }

  calculateImpact(details) {
    let score = 0;
    
    // GPUåŠ é€Ÿãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã®ä½¿ç”¨
    if (details.properties?.includes('transform')) score += 2;
    if (details.properties?.includes('opacity')) score += 2;
    
    // ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã«å½±éŸ¿ã™ã‚‹ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£
    if (details.properties?.some(p => ['width', 'height', 'margin', 'padding'].includes(p))) {
      score -= 3;
    }
    
    // ç¶™ç¶šæ™‚é–“
    if (details.duration > 1000) score -= 1;
    if (details.duration < 100) score += 1;
    
    return score > 0 ? 'Low' : score > -2 ? 'Medium' : 'High';
  }
}

// ãƒ‡ãƒãƒƒã‚°æ©Ÿèƒ½ã‚’æœ‰åŠ¹åŒ–
window.animationDebugger = new AnimationDebugger();
```

---

ã“ã®ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚·ã‚¹ãƒ†ãƒ æ›¸ã¯ã€test_smgãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§çµ±ä¸€æ„Ÿã®ã‚ã‚‹ã€ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã«é…æ…®ã—ãŸã€ã‚¢ã‚¯ã‚»ã‚·ãƒ–ãƒ«ãªã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å®Ÿç¾ã™ã‚‹ãŸã‚ã®åŒ…æ‹¬çš„ãªã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³ã§ã™ã€‚CGIæ™‚ä»£ã®è¦ªã—ã¿ã‚„ã™ã•ã¨ç¾ä»£çš„ãªãƒ¦ãƒ¼ã‚¶ãƒ“ãƒªãƒ†ã‚£ã‚’ä¸¡ç«‹ã•ã›ã€ã™ã¹ã¦ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒå¿«é©ã«ã‚²ãƒ¼ãƒ ã‚’æ¥½ã—ã‚ã‚‹ã‚ˆã†è¨­è¨ˆã•ã‚Œã¦ã„ã¾ã™ã€‚